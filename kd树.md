k近邻法使用的模型实际上对应于对空间的划分；

模型由三个基本要素组成：距离度量、k值得选择、分类决策规则决定；

①在k近邻法中，选取不同的距离度量所确定的最近邻点是不一样的：Lp(xi,xj)=(xi的第l分量-xj的第l分量j)的绝对值的p次方求和的1/p次方；

②关于k值的选取一般在应用中会取一个比较小的数值，通常采用交叉验证法来选取最优的k值；

③要使误分类率最小即经验风险最小，就要使该区域内该分类点最大，所以多数表决规则等价于经验风险最小化；

k近邻法的实现：kd树

<1>kd树的构建

选取x(1)为坐标轴，以训练集中的所有数据x*1坐标中的中位数作为切分点，将超矩形区域切割成两个子区域。将该切分点作为根结点，由根结点生出深度为1的左右子结点，左节点对应坐标x(1) 小于切分点，右结点对应坐标x(1),大于切分点。

对深度为j的结点，选择x(l)(l=j(modk)+1)为切分坐标轴，，以该结点区域中训练数据x(l)坐标的中位数作为切分点，将区域分为两个子区域，且生成深度为j+1的左、右子结点。左节点对应x(l),坐标小于切分点，右结点对应x(l),坐标大于切分点

重复2，直到两个子区域没有数据时停止。

<2>kd树中的搜索

根据p的坐标和kd树的结点向下进行搜索（如果树的结点是以来切分的，那么如果p的坐标小于c，则走左子结点，否则走右子结点）

到达叶子结点时，将其标记为已访问。如果S中不足k个点，则将该结点加入到S中；如果S不空且当前结点与p点的距离小于S中最长的距离，则用当前结点替换S中离p最远的点\n如果当前结点不是根节点，执行（a）；否则，结束算法

（a）回退到当前结点的父结点，此时的结点为当前结点（回退之后的结点）。将当前结点标记为已访问，执行（b）和（c）；如果当前结点已经被访过，再次执行（a）。

（b）如果此时S中不足k个点，则将当前结点加入到S中；如果S中已有k个点，且当前结点与p点的距离小于S中最长距离，则用当前结点替换S中距离最远的点。

（c）计算p点和当前结点切分线的距离。如果该距离大于等于S中距离p最远的距离并且S中已有k个点，执行3；如果该距离小于S中最远的距离或S中没有k个点，从当前结点的另一子节点开始执行1；如果当前结点没有另一子结点，执行3。